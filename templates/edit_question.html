<html>

   <head>
    <title>Modifier question</title>
      <link href="{{ url_for('static', filename = 'modif.css') }}" rel="stylesheet">
      <link href="{{ url_for('static', filename = 'style.css') }}" rel="stylesheet">
      <script src="{{ url_for('static', filename = 'bootstrap.bundle.min.js') }} "></script>
      <script src="{{ url_for('static', filename = 'bootstrap.bundle.min.js.map') }} " ></script>
      <link href="{{ url_for('static', filename = 'bootstrap.min.css.map') }} " rel="stylesheet">
      <link href="{{ url_for('static', filename = 'bootstrap.min.css') }} " rel="stylesheet">
      <!-- Bootstrap 5 CSS --><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
      <!-- Font Awesome CSS --><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">    

      <script src="{{ url_for('static', filename = 'questions_functions.js') }} "></script>

      <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css" rel="stylesheet"/>
      <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js" integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0=" crossorigin="anonymous"></script>
      <script>
        var nbAnswers = parseInt("{{ nbAnswers }}");
        window.onload = function() {
            majInputEtiquettes();
        }
        $(function() {
            $( "#input_etiquette" ).autocomplete({
                source: {{ etiquettes_existantes | tojson }}
            });
        });
        
        $(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
      </script>
   </head>
   
   <body>
    
        <div>
            <div class="container-fluid bg-dark text-light py-3">
                <header class="text-center">
                    <h1 class="display-6">Modification de question</h1> 
                </header>
            </div>
        </div>
        <center>
        <section class="container my-2 bg-dark w-60 text-light p-2" style="box-shadow: 0px 0px 10px white; padding: 5px;">

            <form method="post" style="margin-top: 10px;">

                        <div id="form-etiquettes" style="box-sizing: solid white 1px; padding: 10px; display:flex ; flex-direction: column; justify-content: center; margin: 10px;">
                            <label for="etiquette" class="text-light text-center display-12">Etiquettes :</label>
                            <div id="etiquettes-list" style="display:flex ; flex-direction: row; justify-content: center; margin: 10px;">
                                {% for etiquette in question.etiquettes %}
                                <div id="{{ etiquette }}" class="etiquette" style="margin: 5px;">
                                    <button type="button" onclick="delEtiquette('{{ etiquette }}')" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="appuyez pour supprimer">
                                        {{ etiquette }}
                                        </button>

                                </div>
                                {% endfor %}
                            </div>
                            <input type="hidden" name="etiquettes" value="" id="etiquettes">
                            <div id="add_etiquette">
                                <input id="input_etiquette" placeholder="Ajouter une Ã©tiquette">
                                <button type="button" class="btn btn-labeled " onclick="addEtiquette()">
                                    <span class="btn-label "><i class="fa fa-plus-circle" style = "color:white;" aria-hidden="true"></i></span></button>
                            </div>
                        </div>
                        <!--<h5 class="text-light text-center display-12">Type : {{ question.type }}</h5>
                        <div>
                            <label for="text">Question :</label>
                            <input type="text" name="text" placeholder="ex : De quelle couleur est une orange ?" value="{{ question.text }}">                                
                        </div>
                    -->
                        <br><br>

                        <div class="card bg-dark" style="width: 25rem; box-shadow: 0px 0px 10px white; padding: 10px;">
                            <div class="card-body">
                              <h5 class="card-title">Type : {{ question.type }}</h5>
                              <label for="qst">Question :</label>
                                <textarea id="qst" name="text" rows="3" cols="33" >{{ question.text }}</textarea>
                            </div>
                                {% for i in range(0, nbAnswers) %}
                            <div class="form-check form-switch" style="display:flex ; flex-direction: row; justify-content: center; margin: 10px;">
                                {% if question['answers'][i]['isCorrect'] %}
                                        <input class="form-check-input"  type="checkbox" name="correct{{ i }}" id="flexSwitchCheckDefault" checked>
                                {% else %}
                                    <input class="form-check-input"  type="checkbox" name="correct{{ i }}" id="flexSwitchCheckDefault" >
                                {% endif %}
                                <input type="text" name="text{{ i }}" value='{{ question["answers"][i]["text"] }}'>
                                <button type="button" class="btn btn-labeled btn-danger" onclick="delAnswer()">
                                    <span class="btn-label"><i class="fa fa-trash"></i></span>
                                </button>
                            </div>
                            

                        {% endfor %}
                        
                            <div class="card-body">
                                <button type="button" class="btn btn-labeled " onclick="addAnswer()">
                                    <span class="btn-label ">
                                        <i class="fa fa-plus-circle" style = "color:white;" aria-hidden="true"></i>
                                    </span>
                                </button>                              
                                <input type="submit" class="btn btn-success" value="Confirmer">
                                <input type="hidden" name="id_question" value="{{ id_question }}">
                                <input type="hidden" name="nbAnswers" value="{{ nbAnswers }}" id="nbAnswers">                
                            </div>
                          </div>
                        </div>


             <!--
                        <div id="answers" class="container my-2 bg-dark w-80 text-light p-2" style="display:flex ; flex-direction: column; justify-content: center; padding: 10px;">
                                                    
                                                    {% for i in range(0, nbAnswers) %}
                                                    <div id="answer{{ i }}" style="display:flex ; flex-direction: row; justify-content: center; padding: 10px;">
                                                        

                                                        {% if question['answers'][i]['isCorrect'] %}
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input"  type="checkbox" name="correct{{ i }}" id="flexSwitchCheckDefault" checked>
                                                        </div>
                                                        {% else %}
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input"  type="checkbox" name="correct{{ i }}" id="flexSwitchCheckDefault" >
                                                        </div>
                                                        {% endif %}
                                                        <input type="text" name="text{{ i }}" value='{{ question["answers"][i]["text"] }}'>
                                                        <button type="button" class="btn btn-labeled btn-danger" onclick="delAnswer()">
                                                            <span class="btn-label"><i class="fa fa-trash"></i></span>
                                                        </button>
                                                    </div>
                                                    {% endfor %}

                                                </div>
                                                <div style="margin-top: 5px;">
                                                <button type="button" class="btn btn-labeled " onclick="addAnswer()">
                                                    <span class="btn-label ">
                                                        <i class="fa fa-plus-circle" style = "color:white;" aria-hidden="true"></i>
                                                    </span>
                                                </button>
                                                <input type="submit" class="btn btn-success" value="Confirmer">                
                                                </div>                            
                -->
    
                                               
                    </form>
                    <div style="margin-top: 5px;">
                    <form action="{{ url_for('questions') }}">
                        <input type="submit" class="btn btn-dark" value="Retour">
                    </form>             
                    </div>
        </section> 
        </center>

     
   </body>
   
   
</html>